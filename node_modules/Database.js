const mysql = require("mysql")
class Database {
	constructor(host = "localhost", user = "root", database = "stock"){
		this.connection = mysql.createConnection({
			host: host,
			user: user,
			database: database
		});
	}
	query(sql, args){
		return new Promise((resolve, reject) => {
			try {
				this.connection.query(sql, args, (err, rows)=> {
					if(err){
						console.log(err);
						return reject(err);
					};
					resolve(rows);
				});
			} catch(e) {
				console.log("caught", e);
			}
		}).catch(function(e) {
			console.log(e);
			console.log("testing");
		});
	}

	close(){
		return new Promise((resolve, reject) => {
			this.connection.end( err => {
				if(err) return reject(err)
				resolve();
			});
		});
	}
}
module.exports = Database